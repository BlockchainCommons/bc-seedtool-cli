# @configure_input@

#
#  Makefile.in
#
#  Copyright Â© 2020 by Blockchain Commons, LLC
#  Licensed under the "BSD-2-Clause Plus Patent License"
#

# Package-specific substitution variables
package = @PACKAGE_NAME@
version = @PACKAGE_VERSION@
tarname = @PACKAGE_TARNAME@

# Prefix-specific substitution variables
prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@

# VPATH-specific substitution variables
srcdir = @srcdir@
VPATH = @srcdir@

CFLAGS = -g -O0

toolname = seedtool

.PHONY: all
all: $(toolname)

OBJS = seedtool.o utils.o generators.o params.o input.o output.o random.o randombytes.o hkdf.o

LDFLAGS = -lbc-crypto-base -lbc-shamir -lbc-slip39 -lbc-bip39 -largp

$(toolname): $(OBJS)

seedtool.o: generators.h params.h
utils.o: utils.h
input.o: input.h params.h
output.o: output.h params.h utils.h
params.o: params.h utils.h input.h output.h
generators.o: generators.h utils.h
random.o: random.h randombytes.h hkdf.h
randombytes.o: randombytes.h
hkdf.o: hkdf.h

bindir = $(DESTDIR)/$(prefix)/bin

.PHONY: install
install: $(toolname)
	install -d $(bindir)
	install $(toolname) $(bindir)

.PHONY: uninstall
uninstall:
	rm -f $(bindir)/$(toolname)
	-rmdir $(bindir) >/dev/null 2>&1

.PHONY: check
check: $(toolname)
	./$(toolname)

.PHONY: clean
clean:
	rm -f $(toolname) $(OBJS)
	rm -rf *.dSYM

.PHONY: distclean
distclean: clean
	rm -f Makefile
